# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ runtime –æ—à–∏–±–∫–∏ better-sqlite3

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!

### –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å:
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
Error: Could not locate the bindings file for better-sqlite3
```

### –ü—Ä–∏—á–∏–Ω–∞:
–ù–∞—Ç–∏–≤–Ω—ã–π –º–æ–¥—É–ª—å `better-sqlite3` –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª—Å—è –≤ —Å—Ç–∞–¥–∏–∏ `deps` Docker, –Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞–ª—Å—è –∏–∑ —Å—Ç–∞–¥–∏–∏ `builder`, –≥–¥–µ –æ–Ω –Ω–µ –±—ã–ª –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ runtime –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –º–æ–¥—É–ª—è.

### –†–µ—à–µ–Ω–∏–µ:
–ò–∑–º–µ–Ω–∏–ª–∏ Dockerfile —á—Ç–æ–±—ã –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç–∞–¥–∏–∏ (`deps` –≤–º–µ—Å—Ç–æ `builder`).

---

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞):

```bash
cd ~/tap-drink-coffee && git pull && docker compose down && docker compose build --no-cache && docker compose up -d
```

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

```bash
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd ~/tap-drink-coffee

# 2. –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull

# 3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down

# 4. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ —Å –Ω—É–ª—è
docker compose build --no-cache

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose up -d

# 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs -f app
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

### 1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
```bash
docker compose ps
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
NAME                    STATUS
tap-drink-coffee-app    Up
tap-drink-coffee-nginx  Up
```

### 2. –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
```bash
docker compose logs app | tail -20
```

### 3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
curl http://localhost
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://YOUR_SERVER_IP`

1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏
2. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É"
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!"

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://YOUR_SERVER_IP/admin`
2. –í–æ–π–¥–∏—Ç–µ (admin/admin123)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞—è–≤–∫–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ

---

## üìã –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### Dockerfile (—Å—Ç—Ä–æ–∫–∏ 62-66)

**–ë—ã–ª–æ:**
```dockerfile
# –ö–æ–ø–∏—Ä—É–µ–º node_modules —Å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º better-sqlite3
# Standalone —Ä–µ–∂–∏–º Next.js –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
COPY --from=builder /app/node_modules/better-sqlite3 ./node_modules/better-sqlite3
COPY --from=builder /app/node_modules/bcryptjs ./node_modules/bcryptjs
COPY --from=builder /app/node_modules/.pnpm ./node_modules/.pnpm
```

**–°—Ç–∞–ª–æ:**
```dockerfile
# –ö–æ–ø–∏—Ä—É–µ–º —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π better-sqlite3 –∏–∑ deps (–≥–¥–µ –æ–Ω –±—ã–ª –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω)
# Standalone —Ä–µ–∂–∏–º Next.js –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
# –ö–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å .pnpm –∫–∞—Ç–∞–ª–æ–≥ —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–µ—Ä—Å–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY --from=deps /app/node_modules/.pnpm ./node_modules/.pnpm
COPY --from=deps /app/node_modules/better-sqlite3 ./node_modules/better-sqlite3
```

**–ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:** 
- –ö–æ–ø–∏—Ä—É–µ–º –∏–∑ `deps` –≤–º–µ—Å—Ç–æ `builder`
- –í `deps` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `pnpm rebuild better-sqlite3` (—Å—Ç—Ä–æ–∫–∞ 21)
- –ü–æ—ç—Ç–æ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:

1. **–°—Ç–∞–¥–∏—è `deps`:**
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pnpm install`
   - –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏: `pnpm rebuild better-sqlite3`
   - –ú–æ–¥—É–ª—å –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –¥–ª—è Alpine Linux

2. **–°—Ç–∞–¥–∏—è `builder`:**
   - –ö–æ–ø–∏—Ä—É–µ—Ç `node_modules` –∏–∑ `deps`
   - –°–æ–±–∏—Ä–∞–µ—Ç Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `pnpm build`
   - –ù–ï –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

3. **–°—Ç–∞–¥–∏—è `runner`:**
   - –§–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ –¥–ª—è production
   - –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –∏–∑ `deps`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ better-sqlite3:

```
node_modules/
‚îú‚îÄ‚îÄ .pnpm/
‚îÇ   ‚îî‚îÄ‚îÄ better-sqlite3@12.4.1/
‚îÇ       ‚îî‚îÄ‚îÄ node_modules/
‚îÇ           ‚îî‚îÄ‚îÄ better-sqlite3/
‚îÇ               ‚îî‚îÄ‚îÄ build/
‚îÇ                   ‚îî‚îÄ‚îÄ better_sqlite3.node  ‚Üê –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ better-sqlite3/  ‚Üê –°–∏–º–ª–∏–Ω–∫ –Ω–∞ .pnpm/better-sqlite3@...
```

–ù—É–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–±–∞:
- `.pnpm/better-sqlite3@...` - —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
- `better-sqlite3/` - —Å–∏–º–ª–∏–Ω–∫ –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤

---

## üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω

```bash
# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose exec app sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
ls -la /app/node_modules/.pnpm/better-sqlite3*/node_modules/better-sqlite3/build/

# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–π–ª: better_sqlite3.node
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
ls -la /app/data/

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# drwxr-xr-x nextjs nodejs data
```

### 3. –û—á–∏—Å—Ç–∏—Ç–µ Docker –ø–æ–ª–Ω–æ—Å—Ç—å—é

```bash
docker compose down
docker system prune -a -f
docker volume prune -f
docker compose build --no-cache --pull
docker compose up -d
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –º–æ–¥—É–ª—è

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
cat /app/node_modules/better-sqlite3/package.json | grep version
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `"version": "12.4.1"`

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
2. ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
3. ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
4. ‚úÖ –§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
5. ‚úÖ –ó–∞—è–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
6. ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞—è–≤–∫–∏
7. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

### –õ–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:

```
tap-drink-coffee-app | ‚ñ≤ Next.js 16.0.0
tap-drink-coffee-app | - Local:        http://localhost:3000
tap-drink-coffee-app | - Network:      http://0.0.0.0:3000
tap-drink-coffee-app | ‚úì Ready in XXXms
```

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏:
```
tap-drink-coffee-app | Application created successfully
```

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Ç–æ–ª—å–∫–æ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose logs -f app

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
docker compose logs --tail=50 app

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
docker compose exec app sh

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ app
docker compose restart app

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞
ls -lh data/applications.db
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω—ã–π changelog:** [CHANGELOG-DEPLOY-FIX.md](CHANGELOG-DEPLOY-FIX.md)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Next.js 16:** [FIX-NEXTJS16.md](FIX-NEXTJS16.md)
- **–î–µ–ø–ª–æ–π:** [QUICK-START.md](QUICK-START.md)
- **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:** [DEPLOY-NO-SSL.md](DEPLOY-NO-SSL.md)

---

## ‚úÖ –ò—Ç–æ–≥

–ü—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! –ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:

```bash
cd ~/tap-drink-coffee && git pull && docker compose down && docker compose build --no-cache && docker compose up -d
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫! üéâ

---

**–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 5-10 –º–∏–Ω—É—Ç (–≤—Ä–µ–º—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞)

